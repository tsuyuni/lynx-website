import { Go } from '@lynx';

# å¤šä¸»é¢˜

Lynx æ”¯æŒäº†è¾ƒä¸°å¯Œçš„ [CSS å±æ€§](api/css/properties)ï¼Œé…åˆ [CSS é€‰æ‹©å™¨](api/css/selectors)ã€[CSS å˜é‡](api/css/properties/css-variable)ä»¥åŠ CSS ç»§æ‰¿èƒ½åŠ›ï¼Œå¯è½»æ¾å®ç°å¤šæ ·åŒ–çš„ä¸»é¢˜æ ·å¼ï¼Œä¸ºç”¨æˆ·ç•Œé¢æä¾›ä¸€è‡´ä¸”ä¼˜é›…çš„å¤–è§‚å’Œé£æ ¼ã€‚é€šè¿‡å®šä¹‰å’Œç®¡ç†ä¸åŒçš„ä¸»é¢˜å˜é‡ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢ä¸åŒçš„é…è‰²æ–¹æ¡ˆã€å­—ä½“é£æ ¼ä»¥åŠå…¶ä»–è§†è§‰å…ƒä»¶ï¼Œç¡®ä¿ç”¨æˆ·è·å¾—æœ€ä½³çš„è§†è§‰ä½“éªŒå’Œäº’åŠ¨æ„Ÿå—ã€‚

## ä½¿ç”¨ CSS åä»£é€‰æ‹©å™¨åˆ‡æ¢ä¸»é¢˜

ä¸ Web å¼€å‘ç±»ä¼¼ï¼Œåˆ©ç”¨åä»£é€‰æ‹©å™¨å¯ä»¥é€šè¿‡åˆ‡æ¢çˆ¶çº§å…ƒä»¶çš„ classï¼Œæ¥å½±å“å…¶æ‰€æœ‰åä»£èŠ‚ç‚¹çš„æ ·å¼ï¼Œä»è€Œå®ç°å¤šç§ä¸»é¢˜æ ·å¼çš„åˆ‡æ¢ã€‚

### å®šä¹‰ CSS ä¸»é¢˜

é¦–å…ˆéœ€è¦å®šä¹‰å¤šä¸ªä¸»é¢˜çš„ CSS æ ·å¼ï¼Œä¸åŒä¸»é¢˜ä¼šæœ‰ä¸åŒçš„é¢œè‰²ã€èƒŒæ™¯ç­‰å±æ€§ã€‚
æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®šä¹‰æµ…è‰²å’Œæ·±è‰²ä¸¤ç§ä¸»é¢˜æ ·å¼ï¼Œæµ…è‰²æ¨¡å¼é€šè¿‡ `.theme-light .content` å®šä¹‰æ ·å¼ï¼Œæ·±è‰²æ¨¡å¼é€šè¿‡ `.theme-dark .content` å®šä¹‰æ ·å¼ã€‚

```css
/* æµ…è‰²ä¸»é¢˜ */
.theme-light .content {
  color: black;
  background-color: white;
}

/* æ·±è‰²ä¸»é¢˜ */
.theme-dark .content {
  color: white;
  background-color: black;
}
```

### åº”ç”¨ CSS æ ·å¼

åœ¨é¡µé¢ä¸­ï¼Œå¯¹çˆ¶èŠ‚ç‚¹ï¼ˆå¯ä»¥å®šä¹‰åœ¨[æ ¹èŠ‚ç‚¹](api/elements/built-in/page#æ˜¾å¼ä½¿ç”¨-page)ï¼‰class ä¸º `theme-dark` æˆ– `theme-light`ï¼Œå¯¹åä»£èŠ‚ç‚¹è®¾ç½® class ä¸º `content`ï¼Œè¿™æ ·åä»£èŠ‚ç‚¹
å°±èƒ½è¢«åº”ç”¨åˆ° `.theme-light .content` æˆ–è€… `.theme-dark .content` çš„æ ·å¼ã€‚

```tsx
function App() {
  return (
    <view className="theme-dark">
      <view>
        <text className="content">text</text>
      </view>
    </view>
  );
}
```

### åˆ‡æ¢ä¸»é¢˜æ ·å¼

å½“ä¸»é¢˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ‡æ¢é¡¶å±‚çš„èŠ‚ç‚¹çš„ class ä¸º `theme-dark` æˆ– `theme-light`ï¼Œå³å¯è®©åä»£èŠ‚ç‚¹çš„æ ·å¼å‘ç”Ÿæ›´æ–°ã€‚åœ¨ Lynx å¼€å‘åœºæ™¯ä¸­ï¼Œå‰ç«¯å¤šä¸»é¢˜çš„å€¼å¯ä»¥ç”±å®¢æˆ·ç«¯é€šçŸ¥å‰ç«¯ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡æ›´æ–° [globalProps](api/lynx-api/lynx/lynx-global-props) æ¥é€šçŸ¥å‰ç«¯ä¸»é¢˜å˜åŒ–ã€‚

å‰ç«¯å¯¹åº”å†™æ³•ï¼š

```tsx
import { useMemo } from '@lynx-js/react';
import './App.css';

export function App() {
  const themeClass = useMemo(
    () => `theme-${lynx.__globalProps.appTheme}`,
    [lynx.__globalProps.appTheme],
  );

  return (
    //themeClass çš„å€¼ä¸ºtheme-darkæˆ–theme-light
    <view className={themeClass}>
      <view>
        ...
        <text className="content">Hello Theme</text>
        ...
      </view>
    </view>
  );
}
```

### ä¾‹å­

<Go
  img="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/lynx-website/assets/doc/descendant-class-theme.gif"
  example="css"
  defaultFile="src/descendant_selectors_theme/index.tsx"
  defaultEntryFile="dist/descendant_selectors_theme.lynx.bundle"
  entry="src/descendant_selectors_theme"
></Go>

## ä½¿ç”¨ CSS å˜é‡åˆ‡æ¢ä¸»é¢˜

ä½¿ç”¨åä»£é€‰æ‹©å™¨åˆ‡æ¢å¤šä¸»é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é¢„å…ˆå®šä¹‰ä¸åŒä¸»é¢˜æ ·å¼çš„é€‰æ‹©å™¨ï¼Œåœ¨ä¸»é¢˜ç§ç±»è¾ƒå¤šçš„åœºæ™¯ä¸‹ä¸å¤Ÿçµæ´»ã€‚

å¯ä»¥ä½¿ç”¨ [CSS Variable](api/css/properties/css-variable.mdx) æ¥å®šä¹‰ä¸»é¢˜æ ·å¼ï¼Œç›´æ¥ä¿®æ”¹å˜é‡çš„å€¼æ¥å®ç°ä¸»é¢˜åˆ‡æ¢ã€‚

### å®šä¹‰ CSS ä¸»é¢˜

åŒæ ·æˆ‘ä»¬å®šä¹‰éœ€è¦å˜åŒ–çš„ä¸»é¢˜æ ·å¼å˜é‡ï¼Œå¯¹ç›¸åŒçš„å˜é‡å®šä¹‰ä¸åŒçš„å€¼ã€‚
æ¯”å¦‚ä¸åŒçš„ä¸»é¢˜ä¸‹ï¼Œ`color` å’Œ `background-color` éœ€è¦èƒ½è·Ÿéšä¸»é¢˜å˜åŒ–ï¼Œé‚£ä¹ˆéœ€è¦å®šä¹‰ä¸¤ä¸ª CSS å˜é‡ `--color` å’Œ `--bg`ï¼Œåä»£èŠ‚ç‚¹å¯ä»¥åœ¨æ ·å¼è¡¨ä¸­é€šè¿‡ `var(--color)`ã€`var(--bg)` æ¥è·å–è¿™äº›å˜é‡çš„å€¼ã€‚

```css
.theme-light {
  --color: black;
  --bg: white;
}

.content {
  color: var(--color);
  background-color: var(--bg);
}
```

### åº”ç”¨ CSS æ ·å¼

æ³¨æ„ CSS å˜é‡éœ€è¦è¢«æŒ‚è½½åˆ°é¡¶å±‚èŠ‚ç‚¹ (å¯ä»¥å®šä¹‰åœ¨[æ ¹èŠ‚ç‚¹](api/elements/built-in/page#æ˜¾å¼ä½¿ç”¨-page))ï¼Œè¿™æ ·å…¶å­å­™èŠ‚ç‚¹å¯ä»¥åœ¨å¯¹åº”çš„æ ·å¼è¡¨é‡Œä½¿ç”¨åˆ°è¯¥å˜é‡ã€‚

å…¶åä»£èŠ‚ç‚¹åœ¨ `.content` ä¸­é€šè¿‡ `var(--*)` çš„æ–¹å¼åº”ç”¨å˜é‡çš„å€¼ã€‚

```tsx
function App() {
  return (
    <view id="root" className="theme-light">
      <view>
        <text className="content">text</text>
      </view>
    </view>
  );
}
```

### åˆ‡æ¢ä¸»é¢˜æ ·å¼

#### JS ç›´æ¥ä¿®æ”¹ CSS å˜é‡çš„å€¼

é€šè¿‡ JS API ([`setProperty`](api/css/properties/css-variable#modifying-css-variables-via-javascript-api)) æ¥ç›´æ¥ä¿®æ”¹ CSS å˜é‡å€¼ï¼Œè¿™æ ·å¯ä»¥çµæ´»çš„æ‰¹é‡æ›´æ–° CSS å˜é‡ã€‚

```tsx
import './App.css';

export function App() {
  const handleClick = () => {
    lynx.getElementById('root').setProperty({
      '--color': 'white',
      '--bg': 'black',
    });
  };

  return (
    <view id="root" className="theme-light" bindtap={handleClick}>
      <text className="content">Hello Variable</text>
    </view>
  );
}
```

#### åˆ‡æ¢ class é—´æ¥ä¿®æ”¹å˜é‡çš„å€¼

å½“ç„¶ä¹Ÿå¯ä»¥åœ¨éœ€è¦åˆ‡æ¢ä¸»é¢˜æ—¶ï¼Œé€šè¿‡[åˆ‡æ¢é¡¶å±‚èŠ‚ç‚¹](api/css/properties/css-variable#é€šè¿‡ä¿®æ”¹å£°æ˜äº†-css-å˜é‡çš„é€‰æ‹©å™¨)ä¸Šå®šä¹‰äº†ä¸åŒçš„ CSS å˜é‡çš„ classï¼Œé—´æ¥ä¿®æ”¹å˜é‡çš„å€¼ï¼Œä»è€Œè§¦å‘æ‰€æœ‰åº”ç”¨åˆ°è¯¥å˜é‡çš„å­èŠ‚ç‚¹çš„æ ·å¼æ›´æ–°ã€‚

æ¯”å¦‚ç”¨ `.theme-light` å’Œ `.theme-dark` æ¥å®šä¹‰ä¸åŒä¸»é¢˜éœ€è¦çš„ CSS å˜é‡çš„å€¼ï¼š

```css
.theme-light {
  --color: black;
  --bg: white;
}

.theme-dark {
  --color: white;
  --bg: black;
}

.content {
  color: var(--color);
  background-color: var(--bg);
}
```

åˆ‡æ¢é¡¶å±‚èŠ‚ç‚¹ `.theme-light` æˆ–è€… `.theme-dark`ï¼Œå°±æ˜¯åˆ‡æ¢äº† `--color` å’Œ `--bg` çš„å€¼ï¼Œä»è€Œè®©å¯¹åº” `.content` çš„æ ·å¼è¡¨çš„å±æ€§å€¼æ›´æ–°ã€‚

```tsx
import { useMemo } from '@lynx-js/react';

import './App.css';

export function App() {
  const themeClass = useMemo(
    () => `theme-${lynx.__globalProps.appTheme}`,
    [lynx.__globalProps.appTheme],
  );

  return (
    //themeClass çš„å€¼ä¸ºtheme-darkæˆ–theme-light
    <view className={themeClass}>
      <text id="test" className="content">
        Hello Variable
      </text>
    </view>
  );
}
```

### ä¾‹å­

<Go
  img="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/lynx-website/assets/doc/css-var-theme.gif"
  example="css"
  defaultFile="src/css_variable_theme/index.tsx"
  defaultEntryFile="dist/css_variable_theme.lynx.bundle"
  entry="src/css_variable_theme"
  highlight="{23-43}"
></Go>

## æŒ‰éœ€ä½¿ç”¨ CSS ç»§æ‰¿

åœ¨ä¸€äº›å…·æœ‰å¤æ‚æ ·å¼çš„é¡µé¢ä¸­ï¼Œä½¿ç”¨ CSS ç»§æ‰¿ä¼šæœ‰åŠ©äºç®€åŒ–å¼€å‘ï¼Œä½†å®ç°å±æ€§ç»§æ‰¿é€»è¾‘ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†æ ·å¼å¤„ç†æµç¨‹çš„å¤æ‚åº¦ï¼Œä»è€Œä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚
é‰´äºæ€§èƒ½è€ƒè™‘ï¼ŒLynx æ²¡æœ‰é»˜è®¤å¼€å¯ CSS ç»§æ‰¿èƒ½åŠ›ï¼Œéœ€è¦å¼€å‘è€…æŒ‰éœ€å¯ç”¨ã€‚

### å¦‚ä½•å¼€å¯ CSS ç»§æ‰¿

éœ€è¦é…ç½® [`enableCSSInheritance`](api/rspeedy/react-rsbuild-plugin.pluginreactlynxoptions.enablecssinheritance) æ¥å¯ç”¨ç»§æ‰¿èƒ½åŠ›ã€‚

### é»˜è®¤ç»§æ‰¿çš„å±æ€§

å¼€å¯ `enableCSSInheritance` åï¼Œé»˜è®¤æƒ…å†µä¸‹åªæœ‰è¿™äº›å±æ€§å¯ä»¥è¢«ç»§æ‰¿ï¼š

[`direction`](api/css/properties/direction.mdx),[`color`](api/css/properties/color.mdx),[`font-family`](api/css/properties/font-family.mdx),[`font-size`](api/css/properties/font-size.mdx),[`font-style`](api/css/properties/font-style.mdx),[`font-weight`](api/css/properties/font-weight.mdx),[`letter-spacing`](api/css/properties/letter-spacing.mdx),[`line-height`](api/css/properties/line-height.mdx),[`text-align`](api/css/properties/text-align.mdx),[`text-decoration`](api/css/properties/text-decoration.mdx),[`text-shadow`](api/css/properties/text-shadow.mdx)

### CSS ç»§æ‰¿è§„åˆ™

é»˜è®¤ç»§æ‰¿å±æ€§çš„ç»§æ‰¿è¡Œä¸ºå¯¹é½ [ğŸŒW3C ç»§æ‰¿è¡Œä¸º](https://www.w3.org/TR/css-cascade-3/#inheriting)

### è‡ªå®šä¹‰å¯ç»§æ‰¿çš„å±æ€§

é™¤äº†é»˜è®¤å¯ç»§æ‰¿å±æ€§ä¹‹å¤–ï¼Œå¯ä»¥åœ¨é¡µé¢é…ç½® [`customCSSInheritanceList`](api/rspeedy/react-rsbuild-plugin.pluginreactlynxoptions.customcssinheritancelist) è‡ªå®šä¹‰å¯ç»§æ‰¿çš„ CSS å±æ€§ã€‚
å½“æœ‰è‡ªå®šä¹‰ç»§æ‰¿çš„å£°æ˜æ—¶ï¼Œä»…æœ‰åœ¨è‡ªå®šä¹‰ç»§æ‰¿åˆ—è¡¨é‡Œé¢çš„ CSS å±æ€§æ‰å¯ä»¥ç»§æ‰¿ã€‚

èŒƒä¾‹ï¼š

```json
"customCSSInheritanceList":["font-size","flex-direction"]
```

### CSS ç»§æ‰¿çš„åŠŸèƒ½å±€é™

1. `position:fixed` çš„å…ƒä»¶æ°¸è¿œåªç»§æ‰¿ page çš„å±æ€§ã€‚
2. ä¸æ”¯æŒå…³é”®å­— "inherit"
3. é™¤äº†é»˜è®¤å¯ç»§æ‰¿å±æ€§å¤–ï¼Œåªæœ‰ç±»å‹ä¸ºæšä¸¾æˆ–è€…å¸ƒå°”å€¼çš„ CSS å±æ€§æ”¯æŒè‡ªå®šä¹‰ç»§æ‰¿ã€‚
