import { Go } from '@lynx';

# 交叉观察器

交叉观察器提供了一种观察目标节点与参照节点及目标节点与祖先节点之间交叉状态的方法，当交叉状态发生变化时，触发相应回调。

开发者可以通过以下三个步骤来观察目标节点与参照节点交叉状态的变化：

1. 调用 [`lynx.createIntersectionObserver`](../../../api/lynx-api/lynx/lynx-create-intersection-observer.mdx) 创建 [`IntersectionObserver`](../../../api/lynx-api/intersection-observer.mdx) 对象，指定交叉状态变化的阈值列表。
2. 调用 [`IntersectionObserver`](../../../api/lynx-api/intersection-observer.mdx) 对象的 [`relativeTo`](../../../api/lynx-api/intersection-observer/intersection-observer-relative-to.mdx) 方法指定参照节点。
3. 调用 [`IntersectionObserver`](../../../api/lynx-api/intersection-observer.mdx) 对象的 [`observe`](../../../api/lynx-api/intersection-observer/intersection-observer-observe.mdx) 方法指定目标节点与回调。
4. 调用 [`IntersectionObserver`](../../../api/lynx-api/intersection-observer.mdx) 对象的 [`disconnect`](../../../api/lynx-api/intersection-observer/intersection-observer-disconnect.mdx) 方法清除目标节点与回调。

在下面这个例子中，开发者监听父节点与子节点是否交叉，并在交叉时输出交叉的子节点 [`id`](../../../api/elements/built-in/view.mdx#id) 和交叉的位置。

<Go
  example="event"
  defaultFile="src/visibility_intersection/index.tsx"
  defaultEntryFile="dist/visibility_intersection.lynx.bundle"
  img="/assets/doc/event/visibility_intersection.gif"
  highlight="{8-24}"
  entry="src/visibility_intersection"
/>

交叉观察器的具体语法可以参考 [`IntersectionObserver`](../../../api/lynx-api/intersection-observer.mdx)。
