import { RuntimeBadge } from '@lynx';

# PerformanceObserver: observe() method

指定要观察的性能事件的类型并开始观察。当一个匹配的 [`PerformanceEntry`](api/lynx-api/performance-api/performance-entry) 产生时，创建 `PerformanceObserver` 时设置的回调函数将被调用。

## 语法

```ts
observe(entryIdentifiers: string[]): void
```

### 参数

#### entryIdentifiers

```ts
entryIdentifiers: string[];
```

要观察的 `PerformanceEntry` 的标识符组成的列表。

你可以使用 **entryType** 或 **entryType.name** 作为标识符。比如可以使用 `"metric"` 来监听包括 [`MetricFcpEntry`](api/lynx-api/performance-api/performance-entry/metric-fcp-entry)、
[`MetricTtiEntry`](api/lynx-api/performance-api/performance-entry/metric-tti-entry) 和 [`MetricActualFmpEntry`](api/lynx-api/performance-api/performance-entry/metric-actual-fmp-entry)
在内的整个 metric 类型的性能事件。也可以使用 `"metric.fcp"` 来仅监听 `MetricFcpEntry` 这一种性能事件。

请参见 [`PerformanceEntry.entryType`](api/lynx-api/performance-api/performance-entry#entryType) 和 [`PerformanceEntry.name`](api/lynx-api/performance-api/performance-entry#name)
以获取可用的类型和名称。无法识别的类型会被忽略。如果没有找到有效的类型，`observe()` 将不起作用。

:::tip
推荐在初始化阶段调用该方法，比如根组件的 constructor 或 [`useMemo`](api/react/Function.useMemo) Hook 中以确保在组件或页面加载时尽早调用，以避免错过部分数据。
:::

### 返回值

无 (`undefined`)

## 示例

### 观察某些 entryType 下所有的性能事件

此示例创建了一个 `PerformanceObserver`，通过 `["metric", "pipeline"]` 和观察整个 metric 和 pipeline 类型的 `PerformanceEntry。`

import { Go } from '@lynx';

<Go
  example="performance-api"
  defaultFile="src/performance_observer_observe/index.tsx"
  defaultEntryFile="dist/PerformanceObserverObserve.lynx.bundle"
  img="/assets/doc/performance-observer-observe-demo.jpeg"
  entry="src/performance_observer_observe"
  highlight="{12-38}"
/>

### 观察某些特定的性能事件

此示例创建了一个 `PerformanceObserver`，通过 `["metric.fcp", "pipeline"]` 观察 `MetricFcpEntry` 和整个 pipeline 类型的 `PerformanceEntry。`

<Go
  example="performance-api"
  defaultFile="src/performance_observer_observe/index.tsx"
  defaultEntryFile="dist/PerformanceObserverObserve.lynx.bundle"
  img="/assets/doc/performance-observer-observe-demo.jpeg"
  entry="src/performance_observer_observe"
  highlight="{42-61}"
/>

## 兼容性

import { LegacyCompatTable } from '@lynx';

<LegacyCompatTable metadata="lynx-api/performance-api/performance-observer/observe" />
